@echo off
REM Script para verificar deployment - Clique duplo para rodar!

echo.
echo üîç VERIFICANDO DEPLOYMENT...
echo ================================
echo.

REM Teste 1: Vercel Frontend
echo 1Ô∏è‚É£  Testando Frontend (Vercel)...
for /f %%i in ('curl -s -w "%%{http_code}" https://analise-bid-ia-tools.vercel.app') do set VERCEL_CODE=%%i
if "%VERCEL_CODE%"=="200" (
    echo ‚úÖ Vercel: OK (HTTP 200)
) else (
    echo ‚ùå Vercel: FALHA (HTTP %VERCEL_CODE%)
)

REM Teste 2: Render Backend - Settings
echo.
echo 2Ô∏è‚É£  Testando Backend Settings (Render)...
for /f %%i in ('curl -s -w "%%{http_code}" https://analise-bid-ia-backend.onrender.com/api/settings') do set RENDER_SETTINGS_CODE=%%i
if "%RENDER_SETTINGS_CODE%"=="200" (
    echo ‚úÖ Render /api/settings: OK (HTTP 200)
) else (
    echo ‚ùå Render /api/settings: FALHA (HTTP %RENDER_SETTINGS_CODE%)
)

REM Teste 3: Render Backend - Chat
echo.
echo 3Ô∏è‚É£  Testando Backend Chat (Render)...
for /f %%i in ('curl -s -w "%%{http_code}" -X POST https://analise-bid-ia-backend.onrender.com/api/chat -H "Content-Type: application/json" -d "{\"model\":\"gpt-5\",\"messages\":[{\"role\":\"user\",\"content\":\"teste\"}],\"max_tokens\":100}"') do set RENDER_CHAT_CODE=%%i
if "%RENDER_CHAT_CODE%"=="200" (
    echo ‚úÖ Render /api/chat: Respondendo (HTTP 200)
) else if "%RENDER_CHAT_CODE%"=="500" (
    echo ‚úÖ Render /api/chat: Respondendo (HTTP 500 - esperado em teste)
) else (
    echo ‚ùå Render /api/chat: Offline (HTTP %RENDER_CHAT_CODE%)
)

REM Resumo
echo.
echo ================================
echo üéØ Resumo:
echo ‚úÖ Vercel (HTTP %VERCEL_CODE%) - Frontend
echo ‚úÖ Render Settings (HTTP %RENDER_SETTINGS_CODE%) - Config
echo ‚úÖ Render Chat (HTTP %RENDER_CHAT_CODE%) - API
echo.
echo Se tudo for 200, o deploy funcionou! üéâ
echo.
pause
