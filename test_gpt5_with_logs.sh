#!/bin/bash

# üîç Script para testar GPT-5 com logs detalhados
# Uso: bash test_gpt5_with_logs.sh

echo "=================================================="
echo "üîç TESTE DE DIAGN√ìSTICO GPT-5 COM LOGS"
echo "=================================================="
echo ""

BACKEND_URL="https://analise-bid-ia-backend.onrender.com"
DIAGNOSTIC_ENDPOINT="$BACKEND_URL/api/test-gpt5"

echo "üìç Endpoint: $DIAGNOSTIC_ENDPOINT"
echo "‚è∞ Hor√°rio: $(date)"
echo ""

# Teste 1: Teste simples
echo "üß™ Teste 1: Teste simples"
echo "Mensagem: 'Teste simples: responda OK'"
echo ""

curl -X POST "$DIAGNOSTIC_ENDPOINT" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Teste simples: responda OK"
  }' \
  -w "\n\n‚è±Ô∏è Tempo total: %{time_total}s\n" 

echo ""
echo "=================================================="
echo ""

# Teste 2: Teste com prompt mais longo
echo "üß™ Teste 2: Teste com prompt mais longo"
echo "Mensagem: Multi-line prompt"
echo ""

curl -X POST "$DIAGNOSTIC_ENDPOINT" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Voc√™ √© um assistente especializado em an√°lise de documentos.\n\nAnalise o seguinte texto:\n\nO documento trata de an√°lise de licita√ß√µes p√∫blicas.\n\nQual √© o assunto principal?"
  }' \
  -w "\n\n‚è±Ô∏è Tempo total: %{time_total}s\n"

echo ""
echo "=================================================="
echo "‚úÖ Testes conclu√≠dos!"
